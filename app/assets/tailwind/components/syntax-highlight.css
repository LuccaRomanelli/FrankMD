/*
 * Markdown Syntax Highlighting Styles
 * Uses background overlay technique for textarea highlighting
 */
@layer components {
  /* Container for editor with syntax highlighting */
  .editor-highlight-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    background: var(--theme-bg-primary);
  }

  /* Highlight layer - positioned behind textarea, shows the colored text */
  .syntax-highlight-layer {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    margin: 0;
    pointer-events: none;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
    color: var(--theme-text-primary);
    z-index: 1;
  }

  /* Textarea default styling (when syntax highlighting is disabled) */
  .editor-highlight-wrapper .editor-textarea {
    color: var(--theme-text-primary);
    background: transparent;
    position: relative;
    z-index: 2;
  }

  /* Textarea: transparent text when syntax highlighting is enabled */
  .editor-textarea.syntax-highlight-enabled {
    color: transparent !important;
    caret-color: var(--theme-text-primary);
  }

  /* === Syntax Highlighting Classes === */

  /* Headings - use dedicated heading colors from theme */
  /* Note: We cannot use font-weight changes because the overlay technique
     requires identical text metrics between textarea and highlight layer.
     Bold text is wider and would cause line wrapping to differ. */
  .sh-heading {
    /* font-weight removed to maintain text alignment */
  }

  .sh-h1 {
    color: var(--theme-heading-1);
  }

  .sh-h2 {
    color: var(--theme-heading-2);
  }

  .sh-h3 {
    color: var(--theme-heading-3);
  }

  .sh-h4,
  .sh-h5,
  .sh-h6 {
    color: var(--theme-accent);
  }

  /* Bold text - indicated by color only (font-weight would break alignment) */
  .sh-bold {
    color: var(--theme-text-primary);
    text-shadow: 0 0 0.5px currentColor; /* Subtle emphasis without changing width */
  }

  /* Italic text - indicated by color only (font-style would break alignment) */
  .sh-italic {
    color: var(--theme-text-muted);
  }

  /* Strikethrough */
  .sh-strikethrough {
    text-decoration: line-through;
    color: var(--theme-text-muted);
  }

  /* Inline code and code blocks */
  .sh-code {
    color: var(--theme-accent);
    background: var(--theme-code-bg);
    border-radius: 0.25rem;
    padding: 0 0.25rem;
  }

  /* Links */
  .sh-link {
    color: var(--theme-accent);
    text-decoration: underline;
  }

  /* Images */
  .sh-image {
    color: var(--theme-accent);
  }

  /* List markers (-, *, +, 1.) */
  .sh-list-marker {
    color: var(--theme-text-muted);
  }

  /* Blockquotes */
  .sh-blockquote {
    color: var(--theme-text-muted);
  }

  /* Horizontal rules */
  .sh-hr {
    color: var(--theme-border);
  }

  /* Highlight (==text==) */
  .sh-highlight {
    background: var(--theme-selection);
    color: var(--theme-selection-text);
    border-radius: 0.125rem;
  }
}
